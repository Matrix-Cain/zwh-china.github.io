<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <!--自定义看板娘-->
  <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
  <script src="/live2d-widget/autoload.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">
  
  

  
  <title itemprop="name">并行编程学习 | 雨过天晴&amp;伞落人离&#39;s Blog</title>
  
    <link rel="shortcut icon" href="/images/favicon.ico">
  
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+SerifMerriweather|Merriweather+Sans|Source+Code+Pro|Ubuntu:400,700|Noto+Serif+SC" media="all">
  <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
  <link rel="stylesheet" id="saukra_css-css" href="/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="/css/lib.min.css" media="all">
  <link rel="stylesheet" href="/css/font.css" media="all">
  <link rel="stylesheet" href="/css/insight.css" media="all">
  <link rel="stylesheet" href="/css/jquery.fancybox.min.css" media="all">
  <link rel="stylesheet" href="/css/zoom.css" media="all">
  <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<!--   <link rel="stylesheet" id="saukra_css-css" href="https://2heng.xin/wp-content/cache/autoptimize/css/autoptimize_ad42a61f4c7d4bdd9f91afcff6b5dda5.css
" type="text/css" media="all"> -->
  <script>
  /*Initial Variables*/
  var mashiro_option = new Object();
  var mashiro_global = new Object();
  mashiro_option.NProgressON = true;
  /* 
   * 邮箱信息之类的东西可以填在这里，这些js变量基本都作用于sakura-app.js
   * 这样的设置仅是为了方便在基于PHP开发的主题中设置js变量，既然移植到了Node上，我想或许可以精简这一逻辑吧
   */
  mashiro_option.email_domain = "";
  mashiro_option.email_name = "";
  mashiro_option.cookie_version_control = "";
  mashiro_option.qzone_autocomplete = false;
  mashiro_option.site_name = "雨过天晴&伞落人离's Blog";
  mashiro_option.author_name = "雨过天晴&伞落人离's Blog";
  mashiro_option.site_url = "https://zwh-china.github.io";
  mashiro_option.v_appId = "isAVAfjr2p1f1KqnKuKxD4va-gzGzoHsz";
  mashiro_option.v_appKey = "aVVjA76SnnAo2kP4S9BuGwW4";
  mashiro_option.mathjax = "1";
  mashiro_option.qq_api_url = "https://api.mashiro.top/qqinfo/"; 
  mashiro_option.qq_avatar_api_url = "https://api.mashiro.top/qqinfo/";

  // mashiro_option.jsdelivr_css_src = "https://cdn.jsdelivr.net/gh/moezx/cdn@3.4.5/css/lib.min.css";
  // mashiro_option.float_player_on = true;

  /*End of Initial Variables*/
  </script>
  <script type="text/javascript">
  var bg = "https://cdn.jsdelivr.net/gh/zwh-china/cdn/img/1.jpg,https://cdn.jsdelivr.net/gh/zwh-china/cdn/img/2.jpg,https://cdn.jsdelivr.net/gh/zwh-china/cdn/img/3.jpg,https://cdn.jsdelivr.net/gh/zwh-china/cdn/img/4.jpg".split(",");
  var bgindex = Math.floor(Math.random()*bg.length);
  if (!!window.ActiveXObject || "ActiveXObject" in window) { //is IE?
    alert('朋友，IE浏览器未适配哦~');
  }
  </script>
  <style type="text/css">
  .hljs-ln{border-collapse:collapse}.hljs-ln td{padding:0}.hljs-ln-n:before{content:attr(data-line-number)}
  </style>
  <style type="text/css">.site-top .lower nav{display:block !important;}.author-profile i,.post-like a,.post-share .show-share,.sub-text,.we-info a,span.sitename,.post-more i:hover,#pagination a:hover,.post-content a:hover,.float-content i:hover{color:#FE9600}.feature i,.download,.navigator i:hover,.links ul li:before,.ar-time i,span.ar-circle,.object,.comment .comment-reply-link,.siren-checkbox-radio:checked + .siren-checkbox-radioInput:after{background:#FE9600}::-webkit-scrollbar-thumb{background:#FE9600}.download,.navigator i:hover,.link-title,.links ul li:hover,#pagination a:hover,.comment-respond input[type='submit']:hover{border-color:#FE9600}.entry-content a:hover,.site-info a:hover,.comment h4 a,#comments-navi a.prev,#comments-navi a.next,.comment h4 a:hover,.site-top ul li a:hover,.entry-title a:hover,#archives-temp h3,span.page-numbers.current,.sorry li a:hover,.site-title a:hover,i.iconfont.js-toggle-search.iconsearch:hover,.comment-respond input[type='submit']:hover{color:#FE9600}.comments .comments-main{display:block !important;}.comments .comments-hidden{display:none !important;}background-position:center center;background-attachment:inherit;}
  </style>
<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="雨过天晴&伞落人离's Blog" type="application/atom+xml">
</head>

<body class="page-template page-template-user page-template-page-analytics page-template-userpage-analytics-php page page-id-1297 chinese-font serif isWebKit">
  <div class="scrollbar" id="bar">
  </div>
  <a href="#" class="cd-top faa-float animated"></a>
  <section id="main-container">
    <div class="headertop filter-dot">
  <div id="banner_wave_1"></div>
  <div id="banner_wave_2"></div>
  <figure id="centerbg" class="centerbg">
    <div class="focusinfo no-select">
      <div class="header-tou">
   <a href="https://zwh-china.github.io">
       <img src="https://cdn.jsdelivr.net/gh/zwh-china/cdn@master/img/custom/avatar.jpg">
   </a>
</div>
      <div class="header-info">
        <p>一沙一世界，一花一天堂。君掌盛无边，刹那成永恒。</p>
        <div class="top-social_v2">
          <li id="bg-pre">
            <img class="flipx" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
          
            
              
                <li>
                  <a href="https://github.com/zwh-china?tab=repositories" target="_blank" class="social-github" title="github">
                    <img src="https://cdn.jsdelivr.net/gh/zwh-china/cdn@master/img/social/github.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="http://weibo.com/" target="_blank" class="social-github" title="sina">
                    <img src="https://cdn.jsdelivr.net/gh/zwh-china/cdn@master/img/social/sina.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://music.163.com/" target="_blank" class="social-github" title="wangyiyun">
                    <img src="https://cdn.jsdelivr.net/gh/zwh-china/cdn@master/img/social/wangyiyun.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://www.zhihu.com/" target="_blank" class="social-github" title="zhihu">
                    <img src="https://cdn.jsdelivr.net/gh/zwh-china/cdn@master/img/social/zhihu.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="mailto:zwh_china@outlook.com" target="_blank" class="social-github" title="email">
                    <img src="https://cdn.jsdelivr.net/gh/zwh-china/cdn@master/img/social/email.svg">
                  </a>
                </li>
              
            
              
                <li class="wechat">
                  <a href="/#">
                    <img src="https://cdn.jsdelivr.net/gh/zwh-china/cdn@master/img/social/wechat.png">
                  </a>
                  <div class="wechatInner">
                    <img src="https://cdn.jsdelivr.net/gh/zwh-china/cdn@master/img/custom/wechat.jpg">
                  </div>
                </li>
              
            
          
          <li id="bg-next">
            <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
        </div>
      </div>
    </div>
  </figure>
  <div id="video-container" style="">
    <video style="object-fit: fill" id="bgvideo" class="video" video-name="" src="" width="auto" preload="auto">
    </video>
    <div id="video-btn" class="loadvideo videolive">
    </div>
    <div id="video-add">
    </div>
    <div class="video-stu">
    </div>
  </div>
  <div class="headertop-down faa-float animated" onclick="headertop_down()">
    <span>
      <i class="fa fa-chevron-down" aria-hidden="true">
      </i>
    </span>
  </div>
</div>
    <div id="page" class="site wrapper">
      <header class="site-header no-select gizle sabit" role="banner">
  <div class="site-top">
    <div class="site-branding">
      <span class="site-title">
        <span class="logolink moe-mashiro">
          <a href="/">
            <span class="sakurasono"></span>
            <span class="shironeko">雨过天晴&amp;伞落人离&#39;s Blog</span>
          </a>
        </span>
      </span>
    </div>
    <div class="searchbox search-form-submit">
      <i class="iconfont js-toggle-search iconsearch icon-search">
      </i>
    </div>
    <div id="show-nav" class="showNav mobile-fit">
      <div class="line line1">
      </div>
      <div class="line line2">
      </div>
      <div class="line line3">
      </div>
    </div>
    <div class="lower-cantiner">
      <div class="lower">
        <nav class="mobile-fit-control hide">
          <ul id="menu-new" class="menu">
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-fort-awesome faa-shake" aria-hidden="false"></i>
                    首页
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/archives">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-archive faa-shake" aria-hidden="false"></i>
                    归档
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/categories/%E6%8A%80%E6%9C%AF/">
                          <i class="fa fa-code" aria-hidden="true"></i>
                          技术
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/%E7%94%9F%E6%B4%BB/">
                          <i class="fa fa-file-text-o" aria-hidden="true"></i>
                          生活
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/%E8%B5%84%E6%BA%90/">
                          <i class="fa fa-cloud-download" aria-hidden="true"></i>
                          资源
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/%E9%9A%8F%E6%83%B3/">
                          <i class="fa fa-commenting-o" aria-hidden="true"></i>
                          随想
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/%E8%BD%AC%E8%BD%BD/">
                          <i class="fa fa-book" aria-hidden="true"></i>
                          转载
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="javascript:;">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-list-ul faa-vertical" aria-hidden="false"></i>
                    清单
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/tags/%E6%82%A6%E8%AF%BB/">
                          <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                          书单
                        </a>
                      </li>
                    
                      <li>
                        <a href="/bangumi/">
                          <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                          番组
                        </a>
                      </li>
                    
                      <li>
                        <a href="/music/">
                          <i class="fa fa-headphones" aria-hidden="true"></i>
                          歌单
                        </a>
                      </li>
                    
                      <li>
                        <a href="/tags/%E5%9B%BE%E9%9B%86/">
                          <i class="fa fa-photo" aria-hidden="true"></i>
                          图集
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/comment/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="false"></i>
                    留言板
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/links/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-link faa-shake" aria-hidden="false"></i>
                    友人帐
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/donate/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-heart faa-pulse" aria-hidden="false"></i>
                    赞赏
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-leaf faa-wrench" aria-hidden="false"></i>
                    关于
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/about/">
                          <i class="fa fa-meetup" aria-hidden="true"></i>
                          我？
                        </a>
                      </li>
                    
                      <li>
                        <a href="/theme-sakura/">
                          <i class="fa iconfont icon-sakura" aria-hidden="true"></i>
                          主题
                        </a>
                      </li>
                    
                      <li>
                        <a href="/lab/">
                          <i class="fa fa-cogs" aria-hidden="true"></i>
                          Lab
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/client/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-android faa-vertical" aria-hidden="false"></i>
                    客户端
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/atom.xml">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-rss faa-pulse" aria-hidden="false"></i>
                    RSS
                  </span>
                </a>
                
              </li>
            
          </ul>
        </nav>
      </div>
    </div>
  </div>
</header>

      <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
<div class="pattern-center-blank"></div>

<div id="content" class="site-content">
  <div id="primary" class="content-area">
    <main id="main" class="site-main" role="main">
      <article id="post-1" class="post-1 post type-post status-publish format-standard has-post-thumbnail hentry category-uncategorized">
        <div class="toc"></div>
        <!--<div class="toc-entry-content"><!-- 套嵌目录使用（主要为了支援评论）-->
        
          <header class="entry-header">
            <h1 class="entry-title">并行编程学习</h1>
            <p class="entry-census">&nbsp;·&nbsp;2021-4-19&nbsp;·&nbsp;<span id="busuanzi_value_page_pv"></span>次阅读</p></p>

            <hr>
          </header>
        
        <div class="entry-content">
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>由于我的python基础部分已经自学完，也写过一些很简单的小项目。所以我想寻找一种方式来提升一下我编程的水平。在接触socket编程时，我第一次接触到了多线程这个概念。具体场景就是需要一个UDP监听函数在后台运行，但是默认下在主函数调用一个函数后，主函数会处于一个挂起状态，在运行完函数后，main函数才能继续向下运行。这个过程也叫上下文切换。但是我的需求是UDP在整个程序的生命周期都必须在后台运行。因此也就去了解了多线程，多进程编程技术。进而我想相对系统和深入的了解这方面的知识。</p>
<h3 id="1-1-首先我去了解了一下什么是并发，并行，串行，同步，异步"><a href="#1-1-首先我去了解了一下什么是并发，并行，串行，同步，异步" class="headerlink" title="1-1 首先我去了解了一下什么是并发，并行，串行，同步，异步"></a>1-1 首先我去了解了一下什么是并发，并行，串行，同步，异步</h3><p>复制粘贴一下CSDN文章</p>
<p>1.并发编程又叫多线程编程。</p>
<pre><code>   在程序中，往往有很多很耗时的工作，比如上传文件、下载文件、跟客户聊天需要长时间建立连接。这种时候，一个线程是服务不了多个用户的，会产生因为资源独占产生的等待问题。并发的实质是一个物理CPU(也可以多个物理CPU) 在若干道程序之间多路复用，并发性是对有限物理资源强制行使多用户共享以提高效率。(并发指的是任务数多余cpu核数，通过操作系统的各种任务调度算法，实现用多个任务“一起”执行（实际上总有一些任务不在执行，因为切换任务的速度相当快，看上去一起执行而已））

并发当有多个线程在操作时,如果系统只有一个CPU,则它根本不可能真正同时进行一个以上的线程，它只能把CPU运行时间划分成若干个时间段,再将时间 段分配给各个线程执行，在一个时间段的线程代码运行时，其它线程处于挂起状。.这种方式我们称之为并发(Concurrent)。
</code></pre>
<p>2.“并行”指两个或两个以上事件或活动在同一时刻发生。在多道程序环境下，并行性使多个程序同一时刻可在不同CPU上同时执行。（hadoop集群就是并行计算的）</p>
<pre><code> 当系统有一个以上CPU时,则线程的操作有可能非并发。当一个CPU执行一个线程时，另一个CPU可以执行另一个线程，两个线程互不抢占CPU资源，可以同时进行，这种方式我们称之为并行(Parallel)。
</code></pre>
<p>并发和并行</p>
<pre><code>并发和并行是即相似又有区别的两个概念，并行是指两个或者多个事件在同一时刻发生；而并发是指两个或多个事件在同一时间间隔内发生。在多道程序环境下，并发性是指在一段时间内宏观上有多个程序在同时运行，但在单处理机系统中，每一时刻却仅能有一道程序执行，故微观上这些程序只能是分时地交替执行。倘若在计算机系统中有多个处理机，则这些可以并发执行的程序便可被分配到多个处理机上，实现并行执行，即利用每个处理机来处理一个可并发执行的程序，这样，多个程序便可以同时执行。
</code></pre>
<p>3.串行、并行：</p>
<pre><code>   并行和串行指的是任务的执行方式。串行是指多个任务时，各个任务按顺序执行，完成一个之后才能进行下一个。并行指的是多个任务可以同时执行，异步是多个任务并行的前提条件。
</code></pre>
<p>4.同步、异步：</p>
<pre><code>     指的是能否开启新的线程。同步不能开启新的线程，异步可以。

     异步：异步和同步是相对的，同步就是顺序执行，执行完一个再执行下一个，需要等待、协调运行。异步就是彼此独立,在等待某事件的过程中继续做自己的事，不需要等待这一事件完成后再工作。线程就是实现异步的一个方式。异步是让调用方法的主线程不需要同步等待另一线程的完成，从而可以让主线程干其它的事情。
     异步和多线程并不是一个同等关系,异步是最终目的,多线程只是我们实现异步的一种手段。异步是当一个调用请求发送给被调用者,而调用者不用等待其结果的返回而可以做其它的事情。实现异步可以采用多线程技术或则交给另外的进程来处理。
</code></pre>
<p>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq/_26442553/article/details/78729793">https://blog.csdn.net/qq\_26442553/article/details/78729793</a></p>
<p>再放几张图来直观形象的表现一下</p>
<p>01 串行</p>
<p>串行（ Sequential ）简单来说就是一次只能做一件事情，而且还得按照顺序依次执行，后面的代码段必须等到前面代码段的任务执行完毕后才能执行。</p>
<p><img src="https://img-blog.csdnimg.cn/2020071123450489.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2tpbmdjb2Rpbmc=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>假设我们目前经费有限，只有一名工人，工人没有三头六臂，因此他需要一件接着一件来完成任务，只有完成一件任务后才能去完成下一件任务。</p>
<p>此时完成总体装修工程，一共需要花费 2 + 1 + 3 = 6 天的时间<br>02 并行</p>
<p>并行（ parallelism ）指的是在同一时刻，任务可以同时开始进行，彼此之间没有依赖关系。整个周期的总耗时取决于耗时最长的那件事情所需的时间。</p>
<p><img src="https://img-blog.csdnimg.cn/20200711234514195.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2tpbmdjb2Rpbmc=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>假设我们目前经费比较充足，雇佣了三名工人。装修工程的子任务之间没有依赖关系，因此工人们可以对墙体拆迁、安装水电线、粉刷铺地板这三件事情同时开工，每一名工人负责一件任务。</p>
<p>此时完成总体装修工程，总耗时取决于耗时最长的那件事情（在这里就是粉刷、铺地板）所需的时间，因此一共需要花费 3 天的时间<br>03 并发</p>
<p>并发（ concurrency ）是以交替的方式利用等待某件事情完成的时间来做其他事情。整个周期的总耗时：在一件任务等待时间内，节省这段等待时间来完成另一件任务。</p>
<h6 id><a href="#" class="headerlink" title></a><img src="https://img-blog.csdnimg.cn/20200711234524559.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2tpbmdjb2Rpbmc=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></h6><p>假设我们目前经费不充足，只能雇佣了一名工人。仔细对粉刷、铺地板这件任务进行分析，发现它其实包含两部分，第一部分是进行粉刷墙壁、铺地板，第二部分是进行风干，分别花费 2 天和 1 天的时间。</p>
<p>粉刷、铺地板=粉刷墙壁、铺地板（ 2 天）+ 风干（ 1 天）</p>
<p>在等待房屋风干的时候，工人此时可以去完成其他的任务以节省时间。</p>
<p>在第三天的时候，从宏观角度来看，工人同时做了两件事情，但是微观的角度来看，工人没有三头六臂，其实他只在进行安装水电线的工作。</p>
<p>此时完成总体装修工程，一共需要花费 5 天的时间。<br>04 并行 VS 并发</p>
<p><img src="https://img-blog.csdnimg.cn/20200711234531486.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2tpbmdjb2Rpbmc=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>根据CPU多路复用的原则，会将CPU的执行时间切分成很多细微的CPU时间片，一个CPU在同一时间只能完成一件任务。</p>
<p>对于单核CPU，当面对多个任务的时候，每个小时间片会执行一个操作，多个操作之间快速切换执行，造成了同时运行的假象。其实CPU在一个时间片内运行某一个线程时，其它线程处于挂起状态，这种方式我们称之为并发。</p>
<p>当系统有一个以上 CPU 时，则线程的操作可以并行开始。当一个 CPU 执行一个线程时，另一个 CPU 可以执行另一个线程，两个线程互不抢占 CPU 资源，他们同时进行，这种方式我们称之为并行。</p>
<p>并发的出现，比传统串行系统提高效率与时间，但带来了额外性能开销，如：系统调度和上下文切换。</p>
<p>多核CPU使并行成为可能，大大提高了处理能力。</p>
<p>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/kingcoding/article/details/107293131">https://blog.csdn.net/kingcoding/article/details/107293131</a></p>
<p>还有知乎一位答友用的跑步的例子</p>
<pre><code>说个跑步的例子：

异步：训练的时候，运动员在各自的跑道上跑自己的步

多线程：有很多条跑道，运动员看到哪里有空的跑道就去跑

并行：两人三足跑步，这两个人就是并行



补充：

同步：所有跑道只剩一条的时候，运动员在一条跑道上跑完一个到一个

并发：一组运动员一起跑，隔一段时间到下一组运动员

==========华丽分界线 2018-03-07更新============

关系：

同步的时候无法异步，但异步的过程中可以有同步

并发的执行时间间隔中，也可能会变成并行



**以上是个人理解，如有错误，请各位大佬指正

作者：呵Sever
链接：https://www.zhihu.com/question/28550867/answer/236035067
</code></pre>
<h4 id="我的总结"><a href="#我的总结" class="headerlink" title="我的总结:"></a>我的总结:</h4><p>其实在看这些回答时，我又考虑了另外一个问题，我们现在的处理器都是比如说我的电脑CPU 16core 32thread 也就是16核心32线程。这是什么意思呢？我去国外找了一篇比较详细的教程限于篇幅这里就不复制粘贴了（<a target="_blank" rel="noopener" href="https://phoenixnap.com/kb/single-vs-dual-processors-server%EF%BC%89%E3%80%82%E9%80%9A%E4%BF%97%E7%9A%84%E8%AF%B4%EF%BC%8C%E8%BF%99%E9%87%8C%E7%9A%84core%E5%B0%B1%E6%98%AFCPU%E4%B8%AD%E5%B0%81%E8%A3%85%E7%9A%84%E7%89%A9%E7%90%86%E5%A4%84%E7%90%86%E5%8D%95%E5%85%83%EF%BC%8C%E8%80%8Cthread%E8%A1%A8%E6%98%8E%E6%AF%8F%E4%B8%AA%E6%A0%B8%E5%8F%AF%E4%BB%A5handle%E4%B8%A4%E4%B8%AA%E7%BA%BF%E7%A8%8B%EF%BC%8C%E4%BD%86%E6%98%AF%E5%B9%B6%E9%9D%9E%E5%90%8C%E6%97%B6%EF%BC%8C%E8%80%8C%E6%98%AF%E5%BF%AB%E9%80%9F%E5%88%87%E6%8D%A2%E4%B8%8B%EF%BC%8C%E6%89%80%E4%BB%A5%E8%BF%99%E4%BF%A9thread%E6%B2%A1%E6%B3%95">https://phoenixnap.com/kb/single-vs-dual-processors-server）。通俗的说，这里的core就是CPU中封装的物理处理单元，而thread表明每个核可以handle两个线程，但是并非同时，而是快速切换下，所以这俩thread没法</a> parallelism。16核每个核可以有俩线程。表明信息通道总数是32（If a CPU has six cores with two threads per core, that means there are twelve paths for information to be processed.）。文章中还讲了有多个物理CPU的情况，因为很多服务器主板是支持多个CPU的，主板有多个CPU Socket。有点很重要，无论CPU再怎么高级，用了啥技术什么超线程之类的，一个物理Core一次就是只能运行一个Thread</p>
<p>那么对于并行，我认为可以看作是core和core之间同时运行不同的Thread。对于并发应该是对于一个core来说的，一个Thread运行一会停下来，另一个开始运行，以此轮替。 对于串行有点像并发，但是不像并发那样灵活，必须完全搞定一个Thread才能搞下一个Thread。对于同步和异步，这两个应该是一种模型，对于同步来说，具体的例子就是（也是参考的）去餐厅点菜，同步就是一桌点完下桌去点，异步就是A桌点了一个菜，后厨去做，B桌也点了一个菜，后厨去做….其具体实现就是并发</p>
<p>然后其实我又想到一个问题那就是，CPU的Thread和软件里面的Thread是怎样的关系。好家伙一搜又出来一堆，贴一个StackOverFlow的回答吧</p>
<pre><code class="STATA">Q:
What is the difference between software threads, hardware threads and java threads?

Are software threads, java threads and hardware threads independent or interdependent? I am asking this because, I know Java threads are created inside a process with in jvm (java.exe).

Also is it true that these different process are executed on different hardware threads?

A:
A &quot;hardware thread&quot; is a physical CPU or core. So, a 4 core CPU can genuinely support 4 hardware threads at once - the CPU really is doing 4 things at the same time.

One hardware thread can run many software threads. In modern operating systems, this is often done by time-slicing - each thread gets a few milliseconds to execute before the OS schedules another thread to run on that CPU. Since the OS switches back and forth between the threads quickly, it appears as if one CPU is doing more than one thing at once, but in reality, a core is still running only one hardware thread, which switches between many software threads.

Modern JVMs map java threads directly to the native threads provided by the OS, so there is no inherent overhead introduced by java threads vs native threads. As to hardware threads, the OS tries to map threads to cores, if there are sufficient cores. So, if you have a java program that starts 4 threads, and have 4 or more cores, there&#39;s a good chance your 4 threads will run truly in parallel on 4 separate cores, if the cores are idle.

URL:https://stackoverflow.com/questions/5593328/software-threads-vs-hardware-threads
值得注意的是，这个回答的赞是最多的，但是没被选为标准答案。标准答案如下（感觉还是赞多的回答容易理解，可能是我没怎么了解Java的缘故）

A：
Software threads are threads of execution managed by the operating system.

Hardware threads are a feature of some processors that allow better utilisation of the processor under some circumstances. They may be exposed to/by the operating system as appearing to be additional cores (&quot;hyperthreading&quot;).

In Java, the threads you create maintain the software thread abstraction, where the JVM is the &quot;operating system&quot;. Whether the JVM then maps Java threads to OS threads is the JVM&#39;s business (but it almost certainly does). And then the OS will be using hardware threads if they are available.
</code></pre>
<p>这里面我注意到提到几种Thread,拿JAVA运行在JVM来说，代码里的Thread是代码Thread，被JVM映射到OS级Native Thread，OS再映射到Hardware Thread也就是CPU核的Thread。</p>
<h3 id="1-2-费林分类法（Flynn’s-Taxonomy）"><a href="#1-2-费林分类法（Flynn’s-Taxonomy）" class="headerlink" title="1-2 费林分类法（Flynn’s Taxonomy）"></a>1-2 费林分类法（Flynn’s Taxonomy）</h3><p>费林分类法是分类并行计算机系统架构的一种方式。它基于，Instruction和Data Flow两个概念</p>
<p><img src="http://106.15.74.181/wp-content/uploads/2021/04/image-20210417005116799-1024x719.png"></p>
<p><img src="http://106.15.74.181/wp-content/uploads/2021/04/image-20210417005342757-1024x341.png"></p>
<p>SISD主要应用于很老式的单核处理器上，在现代架构处理器中已经是很少见的了</p>
<p><img src="http://106.15.74.181/wp-content/uploads/2021/04/image-20210417013054402-1-1024x538.png"></p>
<h3 id="1-3-共享内存"><a href="#1-3-共享内存" class="headerlink" title="1-3 共享内存"></a>1-3 共享内存</h3><p>再看看我们最常用的MIMD架构。一般的现代CPU都采用这个架构。评判一个并行体系结构不仅要看硬件架构还要看内存的组织。先看下共享内存模型。一个处理器在修改储存在内存系统中的数据时，如果其他处理器同时也在使用这个数据就会出现问题。已经修改的新值会从处理器缓存传递到共享内存。不过之后还得传递到所有CPU的缓存，使得他们不会处理过时的数据。</p>
<p><img src="http://106.15.74.181/wp-content/uploads/2021/04/image-20210417223722837-1.png"></p>
<p>这个问题称为缓存一致性(cache coherency)问题，是内存一致性问题的一种特殊情况。与线程编程类似，需要能够处理并发问题和同步问题的硬件。其实我是很懵逼的，大概感觉这个问题可能多少和锁有点关系。但是书上讲的也不太清楚，就去查了一下，总觉得这篇文章讲的不错。（<a target="_blank" rel="noopener" href="https://blog.csdn.net/moyeshuier/article/details/103943355?spm=1001.2014.3001.5501%EF%BC%89%EF%BC%8C%E8%AF%BB%E5%AE%8C%E4%BA%86%E5%8F%91%E7%8E%B0%E8%80%81%E5%93%A5%E6%B2%A1%E7%BB%A7%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%8C%E4%BC%B0%E8%AE%A1%E6%98%AF%E9%B8%BD%E4%BA%86%EF%BC%8C%E6%88%91%E5%B0%B1%E6%9C%89%E6%89%BE%E4%BA%86%E6%89%BE%E5%86%99%E4%B8%80%E7%AF%87(https://www.cnblogs.com/dolphin0520/p/3920373.html)%E3%80%82%E5%8F%AF%E6%98%AF%E6%88%91%E8%BF%98%E6%98%AF%E6%B2%A1%E6%87%82%EF%BC%8C%E8%BF%99%E4%B8%9C%E8%A5%BF%E9%9C%80%E8%A6%81%E6%88%91%E7%AE%A1%E4%B8%8D%EF%BC%9F%E7%9B%B4%E5%88%B0%E6%88%91%E6%90%9C%E5%88%B0%E4%BA%86%E7%9F%A5%E4%B9%8E%E8%BF%99%E7%AF%87%E6%96%87%E7%AB%A0(https://www.zhihu.com/question/277395220/answer/640204150)%E5%B0%B1%E6%98%AF%E8%AF%B4%EF%BC%8C%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7%E4%B8%8D%E9%9C%80%E8%A6%81%E6%88%91%E4%BB%AC%E6%93%8D%E5%BF%83%EF%BC%8C%E7%A1%AC%E4%BB%B6%E5%B7%A5%E7%A8%8B%E5%B8%88%E6%88%96%E8%80%85%E8%AF%B4%E6%90%9E%E5%BA%95%E5%B1%82%E7%9A%84%E5%B7%B2%E7%BB%8F%E6%95%B4%E4%BA%86%E4%B8%80%E5%A5%97%E5%8D%8F%E8%AE%AE%E6%88%96%E8%80%85%E6%96%B9%E6%B3%95%E4%BF%9D%E8%AF%81%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7%E3%80%82%E4%BD%86%E6%98%AF%E6%AD%A3%E5%A6%82%E4%B9%A6%E4%B8%AD%E8%AF%B4%E5%88%B0%E7%9A%84%60%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7%E6%98%AF%E5%86%85%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7%E9%97%AE%E9%A2%98%E7%9A%84%E4%B8%80%E7%A7%8D%E7%89%B9%E6%AE%8A%E6%83%85%E5%86%B5%60,%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7%E4%BF%9D%E8%AF%81%E7%9A%84%E6%98%AF%E9%A1%BA%E5%BA%8F%E4%B8%80%E8%87%B4%E6%80%A7%E8%80%8C%E9%9D%9E%E7%BA%BF%E6%80%A7%E4%B8%80%E8%87%B4%E6%80%A7%EF%BC%8C%E5%AF%B9%E4%BA%8E%E6%88%91%E8%BF%99%E7%A7%8D%E5%BE%88low%E7%9A%84%E7%A8%8B%E5%BA%8F%E7%8C%BF%E6%9D%A5%E8%AF%B4%EF%BC%8C%E5%86%99%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E5%A4%9A%E7%BA%BF%E7%A8%8B%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E7%9A%84%E6%98%AF%E7%BA%BF%E6%80%A7%E4%B8%80%E8%87%B4%E6%80%A7%EF%BC%8C%E8%BF%99%E4%B8%AA%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7%E6%88%91%E4%BB%8E%E5%BC%80%E5%A7%8B%E5%B0%B1%E6%B2%A1%E8%80%83%E8%99%91%E5%88%B0%EF%BC%8C%E6%88%91%E8%80%83%E8%99%91%E5%88%B0%E7%9A%84%E5%8F%AA%E6%98%AF%E7%BA%BF%E6%80%A7%E4%B8%80%E8%87%B4%E6%80%A7%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E3%80%82">https://blog.csdn.net/moyeshuier/article/details/103943355?spm=1001.2014.3001.5501），读完了发现老哥没继续更新，估计是鸽了，我就有找了找写一篇(https://www.cnblogs.com/dolphin0520/p/3920373.html)。可是我还是没懂，这东西需要我管不？直到我搜到了知乎这篇文章(https://www.zhihu.com/question/277395220/answer/640204150)就是说，缓存一致性不需要我们操心，硬件工程师或者说搞底层的已经整了一套协议或者方法保证缓存一致性。但是正如书中说到的`缓存一致性是内存一致性问题的一种特殊情况`,缓存一致性保证的是顺序一致性而非线性一致性，对于我这种很low的程序猿来说，写个简单的多线程需要考虑的是线性一致性，这个缓存一致性我从开始就没考虑到，我考虑到的只是线性一致性如何保证。</a></p>
<pre><code>cache coherence 和 memory consistency是两回事。cache coherence对程序员来说是透明的，你可以完全不关心它的存在；它所解决的问题，是一个内存里的变量，被多个cache所加载之后，一个CPU core去修改了这个变量值，如何传播到其他cache上。也就是说，有了cache coherence之后，你可以放心地在一个core里修改变量，它早晚会被另一个core读到。但是程序员其实要求的不仅于此，你可能要求，在一个core修改了一个变量，另一个core立马就能读到；或者你修改了两个变量，你要求另一个core在读到这两个变量的时候，要按照相同的顺序，比如这样的代码：

作者：hellocode
链接：https://www.zhihu.com/question/277395220/answer/393722704
</code></pre>
<h3 id="1-4-并行编程模型"><a href="#1-4-并行编程模型" class="headerlink" title="1-4 并行编程模型"></a>1-4 并行编程模型</h3><p>并行编程模型是硬件和内存体系结构的一个抽象。理论上可以在任何类型的机器上实现。与前面的划分相比，这写编程模型建立在更高的层次，表示软件要以何种方式完成并行计算。每个模型分别有自己的方法与其他处理器共享信息，来访问内存和划分工作。</p>
<p>总的来说分这几个model</p>
<ul>
<li>  共享内存模型</li>
<li>  多线程模型</li>
<li>  消息传递/分布式内存模型</li>
<li>  数据并行模型</li>
</ul>
<p>我感觉书上说的其实并不是很清楚对于初学者来说，然后我就去搜了一下我能理解的（<a target="_blank" rel="noopener" href="https://www.ques10.com/p/36530/explain-the-various-types-of-parallel-programming-/%EF%BC%89">https://www.ques10.com/p/36530/explain-the-various-types-of-parallel-programming-/）</a></p>
<p>差不就是</p>
<ul>
<li>  共享内存模型：</li>
</ul>
<p><img src="http://106.15.74.181/wp-content/uploads/2021/04/image-20210418205720950-1.png"></p>
<p>就是每个core里可能没有自己专有的内存空间，就是那种只对自己可见的内存。而是采取共享一块内存，所有core都在这个共享空间内读写。每个process的空间又主程序分配。再执行结束狗，这些子进程重新加入主程序。</p>
<p>优点：程序开发很轻松，不需要进程通讯和进行数据共享</p>
<p>缺点：用户不知道变量存在那？（没太懂）</p>
<ul>
<li>  消息传输模型</li>
</ul>
<p><img src="http://106.15.74.181/wp-content/uploads/2021/04/image-20210418210732237.png"></p>
<p>每个进程都有自己的一套数据，他们间想要交换数据之类的，就需要进程通信，每个发送行为都需要有对应的接受行为</p>
<p>优点：数据可以不受位置限制存储，进程间通讯是很容易的。MPI可用(MPI难度极大溜了溜了)</p>
<p>缺点：当发送没被接受就会阻塞导致进程停止运行</p>
<ul>
<li>  线程模型</li>
</ul>
<p><img src="http://106.15.74.181/wp-content/uploads/2021/04/image-20210418214020235-871x1024.png"></p>
<p>线程被定义为进程中的一小段序列。不同的线程可以在同一个core也可以在不同core执行。如果thread在不同core被执行，那么他们的执行具有一致性。</p>
<p>优点：程序员不需要考虑并行处理</p>
<p>缺点：要注意考虑两个线程不能同时更新共享的资源。</p>
<ul>
<li>  数据并行模型</li>
</ul>
<p><img src="http://106.15.74.181/wp-content/uploads/2021/04/image-20210418214823439-1024x440.png"></p>
<p>数据并行是最简单的一种并行。在这里数据集合被组织为一个常规的结构，比如说数组。许多程序对这个结构的不同部分施以相同操作。设想你要把两个都具有100个元素的数组的对应项相加并将结果储存在新的数组。如果有4个核心（processor）那么每个核心(processor)都可以做25次运算。P.S就这个我觉得最好理解emm</p>
<hr>
<p>2021/4/27 更新</p>
<p>找到一个讲的非常好的各种相关概念的知乎</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/343232126">https://zhuanlan.zhihu.com/p/343232126</a></p>
<h2 id="上述内容可以归纳总结成下表："><a href="#上述内容可以归纳总结成下表：" class="headerlink" title="上述内容可以归纳总结成下表："></a><strong>上述内容可以归纳总结成下表：</strong></h2><table>
<thead>
<tr>
<th>并发类型</th>
<th>切换机制</th>
<th>CPU数量</th>
<th>适用场景</th>
<th>代表Python库</th>
</tr>
</thead>
<tbody><tr>
<td>多线程（抢占式多任务处理）</td>
<td>操作系统决定何时切换任务</td>
<td>1个</td>
<td>I/O密集型</td>
<td>_thread(已淘汰）, threading, cocurrent.futures, nornir</td>
</tr>
<tr>
<td>异步（协作式多任务处理）</td>
<td>任务本身决定何时切换</td>
<td>1个</td>
<td>I/O密集型</td>
<td>asyncio, netdev, aiohttp, aioping, gevent, tornado, twisted</td>
</tr>
<tr>
<td>多进程 （并行）</td>
<td>所有任务同时运行</td>
<td>多个</td>
<td>CPU密集型</td>
<td>multiprocessing</td>
</tr>
</tbody></table>

        </div>
        <!-- .entry-content -->
        <div class="single-reward">
          <div class="reward-open">赏
            <div class="reward-main">
              <ul class="reward-row">
                <li class="alipay-code"><img src="https://cdn.jsdelivr.net/gh/zwh-china/cdn@master/img/custom/donate/AliPayQR.jpg"></li>
                <li class="wechat-code"><img src="https://cdn.jsdelivr.net/gh/zwh-china/cdn@master/img/custom/donate/WeChanQR.jpg"></li>
              </ul>
            </div>
          </div>
        </div>
        <div style="text-align:center; width: 100%" class="social-share share-mobile" data-disabled="diandian, tencent"></div>
        <footer class="post-footer">
          <div class="post-lincenses"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="nofollow"><i class="fa fa-creative-commons" aria-hidden="true"></i> 知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a></div>
          <div class="post-tags">
          </div>
          <div class="post-share">
            <div class="social-share sharehidden share-component"></div>
            <i class="iconfont show-share icon-forward"></i>
          </div>
        </footer><!-- .entry-footer -->
      </article>
      <!-- #post-## -->
      <div class="toc" style="background: none;"></div>
      <section class="post-squares nextprev">
        
          
            <div class="post-nepre half previous">
          
            <a href="/2021/05/03/python%20IO%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/" rel="prev">
              <div class="background">
                <img class="lazyload" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="">
              </div>
              <span class="label">
              Previous Post</span>
              <div class="info">
                <h3>
                python IO多路复用</h3>
                <hr>
              </div>
            </a>
          </div>
        
        
          
            <div class="post-nepre half next">
          
            <a href="/2021/03/31/%E5%88%9D%E8%AF%86dll%E7%83%AD%E8%A1%A5%E4%B8%81/" rel="next">
              <div class="background">
                <img class="lazyload" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="">
              </div>
              <span class="label">
              Next Post</span>
              <div class="info">
                <h3>
                初识dll热补丁</h3>
                <hr>
              </div>
            </a>
          </div>
        
      </section>
      
<div id="vcomments"></div>
<script>
  window.onload = function(){
      var valine = new Valine();
      valine.init({
        el: '#vcomments',
        appId: "isAVAfjr2p1f1KqnKuKxD4va-gzGzoHsz",
        appKey: "aVVjA76SnnAo2kP4S9BuGwW4",
        path: window.location.pathname,
        placeholder: "你是我一生只会遇见一次的惊喜 ..."
      })
  }
</script>

<section class="author-profile">
    <div class="info" itemprop="author" itemscope="" itemtype="https://schema.org/Person">
      <a href="/about/" class="profile gravatar"><img src="https://cdn.jsdelivr.net/gh/zwh-china/cdn@master/img/custom/avatar.jpg" itemprop="image" alt="雨过天晴&伞落人离" height="70" width="70"></a>
      <div class="meta">
        <span class="title">Author</span>
        <h3 itemprop="name">
        <a href="https://zwh-china.github.io" itemprop="url" rel="author">雨过天晴&伞落人离</a>
        </h3>
      </div>
    </div>
    <hr>
    <p><i class="iconfont icon-write"></i>一沙一世界，一花一天堂。君掌盛无边，刹那成永恒。</p>
  </section>
</div>



    </div>    
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            // PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
    <!-- <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 雨过天晴&amp;伞落人离<br>
      powered_by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer> -->
<footer id="colophon" class="site-footer" role="contentinfo">
  <div class="site-info">
    <div class="footertext">
      <div class="img-preload">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/wordpress-rotating-ball-o.svg">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/disqus-preloader.svg">
      </div>
      <p style="color: #666666;">&copy 2018</p>
    </div>
    <div class="footer-device">
    <p style="font-family: 'Ubuntu', sans-serif;">
        <span style="color: #b9b9b9;">Theme <a href="https://github.com/honjun/hexo-theme-sakura" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Sakura</a> <i class="iconfont icon-sakura rotating" style="color: #ffc0cb;display:inline-block"></i> by <a href="https://2heng.xin/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Mashiro</a>&<a href="https://www.hojun.cn/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Hojun</a>, Powered by Hexo, Hosted by Coding Pages</a>
        </span>
      </p>
    </div>
  </div><!-- .site-info -->
</footer>



<!-- <script src="/js/tocbot.js"></script> -->
<script type="text/javascript" src="/js/lib.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script type="text/javascript" src="/js/InsightSearch.js"></script>
<script type="text/javascript" src="/js/jquery.fancybox.min.js"></script>
<script type="text/javascript" src="/js/zoom.min.js"></script>
<script type="text/javascript" src="/js/sakura-app.js"></script>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine@1.3.4/dist/Valine.min.js'></script>
<script src="/js/botui.js"></script>
<!-- 不蒜子 网页计数器 -->
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script> -->
<script type="text/javascript">
/* <![CDATA[ */
if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  var Poi = {"pjax":"1","movies":{"url": "","name":"","live":"close"},"windowheight":"fixed","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
} else {
  var Poi = {"pjax":"1","movies":{"url": "","name":"","live":"open"},"windowheight":"auto","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
}
/* ]]> */

</script>
<script>
$(document).ready(function() {
  if ($(".toc").length > 0 && document.body.clientWidth > 1200) {
    if ($(".pattern-center").length > 0) { //有图的情况
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -400,
          scrollSmoothOffset: -85
      });
    } else {
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -85,
          scrollSmoothOffset: -85
      });
    }
    var offsetTop = $('.toc').offset().top - 95;
    window.onscroll = function() {
      var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
      if (scrollTop >= offsetTop) {
        $('.toc').addClass('toc-fixed');
      } else {
        $('.toc').removeClass('toc-fixed');
      }
    }
  }
});
</script>
<!-- 🌸飘落 -->

    <div class="openNav no-select" style="height: 50px;">
      <div class="iconflat no-select" style="width: 50px; height: 50px;">
        <div class="icon"></div>
      </div>
      <div class="site-branding search-form-submit">
        <i class="iconfont js-toggle-search iconsearch icon-search"></i>
      </div>
    </div>
  </section>
  <div class="skin-menu no-select" id="mainskin" style="position: fixed">
 <div class="theme-controls row-container">
  <ul class="menu-list">
   <li id="white-bg"> <i class="fa fa-television" aria-hidden="true"></i></li>
   <li id="sakura-bg"> <i class="iconfont icon-sakura"></i></li>
   <li id="gribs-bg"> <i class="fa fa-slack" aria-hidden="true"></i></li>
   <li id="KAdots-bg"> <i class="iconfont icon-dots"></i></li>
   <li id="totem-bg"> <i class="fa fa-optin-monster" aria-hidden="true"></i></li>
   <li id="pixiv-bg"> <i class="iconfont icon-pixiv"></i></li>
   <li id="bing-bg"> <i class="iconfont icon-bing"></i></li>
   <li id="dark-bg"> <i class="fa fa-moon-o" aria-hidden="true"></i></li>
  </ul>
 </div>
</div>
<canvas id="night-mode-cover"></canvas> 
  <div class="changeSkin-gear no-select">
  <div class="keys" id="setbtn"> 
   <span id="open-skinMenu"> 切换主题 | SCHEME TOOL  
     <i class="iconfont icon-gear inline-block rotating"></i> 
   </span>
  </div>
</div>
  <div id="mo-nav" class="">
  <div class="m-avatar">
    <img src="https://cdn.jsdelivr.net/gh/zwh-china/cdn@master/img/custom/avatar.jpg">
  </div>
  <p style="text-align: center; color: #333; font-weight: 900; font-family: 'Ubuntu', sans-serif; letter-spacing: 1.5px">雨过天晴&伞落人离's Blog</p>
  <p style="text-align: center; word-spacing: 20px;">
    
      
        <a href="http://github.com/zwh-china" class="fa fa-github" target="_blank" style="color: #333; margin-left:20px"></a>
      
        <a href="http://weibo.com/" class="fa fa-weibo" target="_blank" style="color: #dd4b39; margin-left:20px"></a>
      
        <a href="https://wpa.qq.com/msgrd?v=3&uin=2540649733&site=qq&menu=yes" class="fa fa-qq" target="_blank" style="color: #25c6fe; margin-left:20px"></a>
      
    
  </p>
  <ul id="menu-new-1" class="menu">
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
            首页
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/archives">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
            归档
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/categories/%E6%8A%80%E6%9C%AF/">
                  <i class="fa fa-code" aria-hidden="true"></i>
                  技术
                </a>
              </li>
            
              <li>
                <a href="/categories/%E7%94%9F%E6%B4%BB/">
                  <i class="fa fa-file-text-o" aria-hidden="true"></i>
                  生活
                </a>
              </li>
            
              <li>
                <a href="/categories/%E8%B5%84%E6%BA%90/">
                  <i class="fa fa-cloud-download" aria-hidden="true"></i>
                  资源
                </a>
              </li>
            
              <li>
                <a href="/categories/%E9%9A%8F%E6%83%B3/">
                  <i class="fa fa-commenting-o" aria-hidden="true"></i>
                  随想
                </a>
              </li>
            
              <li>
                <a href="/categories/%E8%BD%AC%E8%BD%BD/">
                  <i class="fa fa-book" aria-hidden="true"></i>
                  转载
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="javascript:;">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
            清单
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/tags/%E6%82%A6%E8%AF%BB/">
                  <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                  书单
                </a>
              </li>
            
              <li>
                <a href="/bangumi/">
                  <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                  番组
                </a>
              </li>
            
              <li>
                <a href="/music/">
                  <i class="fa fa-headphones" aria-hidden="true"></i>
                  歌单
                </a>
              </li>
            
              <li>
                <a href="/tags/%E5%9B%BE%E9%9B%86/">
                  <i class="fa fa-photo" aria-hidden="true"></i>
                  图集
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/comment/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="true"></i>
            留言板
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/links/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
            友人帐
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/donate/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-heart faa-pulse" aria-hidden="true"></i>
            赞赏
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
            关于
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/about/">
                  <i class="fa fa-meetup" aria-hidden="true"></i>
                  我？
                </a>
              </li>
            
              <li>
                <a href="/theme-sakura/">
                  <i class="fa iconfont icon-sakura" aria-hidden="true"></i>
                  主题
                </a>
              </li>
            
              <li>
                <a href="/lab/">
                  <i class="fa fa-cogs" aria-hidden="true"></i>
                  Lab
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/client/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-android faa-vertical" aria-hidden="true"></i>
            客户端
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/atom.xml">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-rss faa-pulse" aria-hidden="true"></i>
            RSS
          </span>
        </a>
        
      </li>
    
  </ul>
  <p style="text-align: center; font-size: 13px; color: #b9b9b9;">&copy 2019 hexo-sakura</p>
</div>
<button onclick="topFunction()" class="mobile-cd-top" id="moblieGoTop" title="Go to top" style="display: none;"><i class="fa fa-chevron-up" aria-hidden="true"></i></button>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
<!-- require MetingJS -->
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>
<style>
  .aplayer .aplayer-lrc {
    height: 35px;
  }
  .aplayer .aplayer-lrc p{
    font-size: 16px;
    font-weight: 700;
    line-height: 18px !important;
  }
  .aplayer .aplayer-lrc p.aplayer-lrc-current{
    color: #FF1493;
  }
  .aplayer.aplayer-narrow .aplayer-body{
    left: -66px !important;
  }
  .aplayer.aplayer-fixed .aplayer-lrc {
    display: none;
  }
  .aplayer .aplayer-lrc.aplayer-lrc-hide {
      display:none !important;
  }
  .aplayer.aplayer-fixed .lrc-show {
    display: block;
    background: rgba(255, 255, 255, 0.8);
  }
</style>
<meting-js

    id="2660651585"

    server="netease"

    type="playlist"

    fixed="true"

    autoplay="false"

    loop="all"

    order="random"

    preload="auto"

    volume="0.7"

    mutex="true"

</meting-js>
<script>
  $(function(){
    $('body').on('click', '.aplayer', function(){
      if($('.aplayer-button').hasClass('aplayer-play')) {
        $('.aplayer-lrc').removeClass('lrc-show');
      } else {
        $('.aplayer-lrc').addClass('lrc-show');
      }
    })
  });
</script>

</body>
</html>
<script src="https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js"></script>